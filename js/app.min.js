var app=(function(){var a={initMap:function(){L.mapbox.accessToken="pk.eyJ1IjoibmtvZWNoIiwiYSI6IllzVF8ya2sifQ.D5WtsqKGS6ulGVPrBwV9mA";map=L.mapbox.map("map",null,{maxZoom:14,minZoom:9}).setView([-1.456218319528783,37.327423095703125],11)},setCircleStyle:function(g,f,l,j,h){var k={radius:g,fillColor:f,color:l,weight:j,fillOpacity:h};return k},setFillColor:function(d,c){if(c=="m_watertype"){switch(d){case"Dam":return"#1E90FF";case"River":return"#ff0000";case"Well":return"#800080";case"Pond":return"#008000";case"Springs":return"#0000A0";case"Water Harvesting":return"#800000"}}else{if(c=="m_storetank"){switch(d){case"Yes":return"#0000A0";case"No":return"#ff0000"}}else{return false}}},setProportionalSymbol:function(g,f,k,j,h){if(g<f){return 4}else{if(g>=f&&g<k){return 7}else{if(g>=k&&g<j){return 10}else{if(g>=j&&g<h){return 13}else{return 17}}}}},onEachFeature:function(e,d,b,f,c){var g={maxWidth:300};if(e.properties){d.onclick=(function(h){h.bindPopup("<b>Water Access Information </b> <hr><b>Name:</b> "+e.properties.res_name+"<br><b>"+f+": </b>"+e.properties[b]+c,g)})(d);d.on("mouseover",function(h){if(map){popup=L.popup().setLatLng(h.latlng).setContent("<b>Respondent </b> <hr><b>Name:</b> "+e.properties.res_name+"<br><small style='color:#336699'>Click point for more...</small>",g).openOn(map);if(!L.Browser.ie&&!L.Browser.opera){h.target.bringToFront()}}});d.on("mouseout",function(h){if(popup&&map){map.closePopup(popup);popup=null}})}},setMapLayers:function(){layers={basemap:L.mapbox.tileLayer("nkoech.c858c345").addTo(map),m_watertype:L.geoJson(m_watertype,{pointToLayer:function(b,c){return L.circleMarker(c,a.setCircleStyle(6,a.setFillColor(b.properties.water_type,"m_watertype"),"#fff",3,1))},onEachFeature:function(c,b){a.onEachFeature(c,b,"water_type","Water Source","")}}),m_watercost:L.geoJson(m_watercost,{pointToLayer:function(b,c){return L.circleMarker(c,a.setCircleStyle(a.setProportionalSymbol(b.properties.water_cost,30,35,40,45),"#ff0000","#fff",3,1))},onEachFeature:function(c,b){a.onEachFeature(c,b,"water_cost","20L Jerican Cost"," Ksh")}}),m_waterdist:L.geoJson(m_waterdist,{pointToLayer:function(b,c){return L.circleMarker(c,a.setCircleStyle(a.setProportionalSymbol(b.properties.dist_water,3,6,9,12),"#800080","#fff",3,1))},onEachFeature:function(c,b){a.onEachFeature(c,b,"dist_water","Water Distance"," Km")}}),m_storetank:L.geoJson(m_storetank,{pointToLayer:function(b,c){return L.circleMarker(c,a.setCircleStyle(6,a.setFillColor(b.properties.store_tank,"m_storetank"),"#fff",3,1))},onEachFeature:function(c,b){a.onEachFeature(c,b,"store_tank","Access Storage Tank ","")}}),m_jericanused:L.geoJson(m_jericanused,{pointToLayer:function(b,c){return L.circleMarker(c,a.setCircleStyle(a.setProportionalSymbol(b.properties.jericans_used,3,5,7,9),"#C15022","#fff",3,1))},onEachFeature:function(c,b){a.onEachFeature(c,b,"jericans_used","Jerricans Used Daily","")}})}},mapComponent:function(){layers.basemap.addTo(map);a.setMapComponent(layers.m_watertype,"m_watertype","Water Source Type",1,"m_watertype_legend");a.setMapComponent(layers.m_watercost,"m_watercost","20L Jerrican Cost",2,"m_watercost_legend");a.setMapComponent(layers.m_waterdist,"m_waterdist","Water Source Distance",3,"m_waterdist_legend");a.setMapComponent(layers.m_storetank,"m_storetank","Storage Tank Access",4,"m_storetank_legend");a.setMapComponent(layers.m_jericanused,"m_jericanused","Jericans Used Daily",5,"m_jericanused_legend")},setMapComponent:function(g,d,c,h,f){var e=document.getElementById("menu-ui");var b=document.createElement("a");if(h==1){g.setZIndex(h).addTo(map);map.legendControl.addLegend(document.getElementById(f).innerHTML);b.href="#";b.id=d;b.className="active";b.innerHTML=c}else{b.href="#";b.id=d;b.className="";b.innerHTML=c}b.onclick=function(l){var k=map.getContainer().querySelector(".menu-ui");var j=k.querySelectorAll(".active");l.preventDefault();l.stopPropagation();if(this.className!="active"){for(i=0;i<j.length;i++){map.legendControl.removeLegend(document.getElementById(j[i].id+"_legend").innerHTML);map.removeLayer(layers[j[i].id]);j[i].className=""}g.addTo(map);map.legendControl.addLegend(document.getElementById(f).innerHTML);this.className="active"}else{map.legendControl.removeLegend(document.getElementById(f).innerHTML);map.removeLayer(g);this.className=""}};e.appendChild(b)}};return a})();app.initMap();app.setMapLayers();app.mapComponent();